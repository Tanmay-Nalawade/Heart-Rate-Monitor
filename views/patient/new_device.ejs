<% layout('layouts/bootstrap')%>

<div class="container py-5 w-100">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-10">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-success text-white text-center py-3">
          <h1 class="h4 mb-0">
            <i class="fas fa-microchip me-2"></i>Register New Device
          </h1>
        </div>

        <div class="card-body p-4">
          <form
            action="/patient/dashboard"
            method="POST"
            class="validated-form"
            novalidate
          >
            <h5 class="mb-3 border-bottom pb-2 text-primary">
              Device Identification
            </h5>

            <div class="mb-3">
              <label for="hardwareId" class="form-label fw-bold">
                Hardware ID (Particle Device ID)
              </label>
              <input
                type="text"
                class="form-control form-control-lg"
                id="hardwareId"
                name="device[hardwareId]"
                placeholder="e.g., 2d001e00..."
                required
              />
              <div class="form-text">Found on the hardware module sticker.</div>
            </div>

            <div class="mb-3">
              <label for="label" class="form-label fw-bold"
                >Device Nickname</label
              >
              <input
                type="text"
                class="form-control"
                id="label"
                name="device[label]"
                placeholder="e.g., My Wrist Monitor"
                required
              />
            </div>

            <div class="row g-3">
              <div class="col-12 col-md-6">
                <label for="model" class="form-label">Model Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="model"
                  name="device[model]"
                  value="Photon 2"
                  required
                />
              </div>
              <div class="col-12 col-md-6">
                <label for="firmwareVersion" class="form-label">
                  Firmware Version
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="firmwareVersion"
                  name="device[firmwareVersion]"
                  placeholder="e.g., 1.0.1"
                  required
                />
              </div>
            </div>

            <div class="form-check form-switch my-4">
              <input
                class="form-check-input"
                type="checkbox"
                id="isActive"
                name="device[isActive]"
                value="true"
                checked
              />
              <label class="form-check-label" for="isActive">
                Activate Device Immediately
              </label>
            </div>

            <h5 class="mt-4 mb-3 border-bottom pb-2 text-primary">
              Measurement Settings
            </h5>

            <div class="mb-3">
              <label for="frequency" class="form-label fw-bold">
                Frequency (Minutes)
              </label>
              <input
                type="number"
                class="form-control"
                id="frequency"
                name="device[measurementConfig][frequencyMinutes]"
                value="30"
                min="5"
                required
              />
            </div>

            <div class="row g-3 mb-4">
              <div class="col-6">
                <label for="startTime" class="form-label">Start Time</label>
                <input
                  type="time"
                  class="form-control"
                  id="startTime"
                  name="device[measurementConfig][startTime]"
                  value="06:00"
                  required
                />
              </div>
              <div class="col-6">
                <label for="endTime" class="form-label">End Time</label>
                <input
                  type="time"
                  class="form-control"
                  id="endTime"
                  name="device[measurementConfig][endTime]"
                  value="22:00"
                  required
                />
              </div>
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <a
                href="/patient/dashboard"
                class="btn btn-outline-secondary btn-lg order-2 order-md-1"
              >
                Cancel
              </a>
              <button class="btn btn-success btn-lg order-1 order-md-2">
                <i class="fas fa-plus-circle me-2"></i> Register Device
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
